/* client-side/components/home/BannerSlider.module.css */
/* ظرف اصلی اسلایدر: کنترل عرض، فاصله‌ها و overflow (برای دیدن اسلایدهای کنار) */
.wrapper {
  /* تنظیم عرض ظرف اسلایدر */
  width: 100%;
  /* full-bleed: کشیدن اسلایدر به تمام عرض صفحه */
  max-width: 100vw;
  /* موقعیت ظرف برای قرارگیری نسبی عناصر داخل */
  position: relative;
  /* فاصله عمودی کوچک بالای اسلایدر */
  /* ensure banners sit below the sticky header (smaller gap) */
  margin-top: calc(var(--header-height, 64px) + 4px);
  padding: 0 0; /* reduce vertical padding so banners are closer to header */
  /* اجازه می‌دهد اسلایدهای کناری بیرون ظرف دیده شوند (برای اورلپ) */
  overflow: visible; /* معیار: باید visible باشد اگر اورلپ می‌خواهیم */
  box-shadow: 0 10px 30px var(--shadow-3);
}

/* Prevent Swiper from hiding duplicated loop slides */
.swiper-slide-duplicate { visibility: visible !important; opacity: 1 !important; }
/* کارت داخل اسلاید تکراری: حذف transform اضافی تا ظاهر ثابت بماند */
.swiper-slide-duplicate .card { opacity: 1 !important; transform: none !important; }

/* Ensure Swiper internals do not clip transformed slides */
/* جلوگیری از برش (clipping) درون المان‌های Swiper */
.swiper, .swiper-wrapper {
  overflow: visible !important;
}

/* Ensure transformed slides are rendered properly and not clipped */
/* هر اسلاید: فعال کردن preserve-3d تا transform‌ها درست رندر شوند و حداقل عرض کارت */
.swiper-slide {
  -webkit-transform-style: preserve-3d;
  transform-style: preserve-3d;
  /* حداقل عرض کارت (معیار: جلوگیری از خیلی کوچک شدن کارت روی موبایل) */
  min-width: 120px;
}

/* Base stacking order to keep center slide above others.
   This avoids duplicated loop slides or timing issues making side slides
   overlap the center when navigating/coming back from another page. */
.swiper-slide { z-index: 10; position: relative; }
.swiper-slide-active { z-index: 2000 !important; }
.swiper-slide-next, .swiper-slide-prev { z-index: 800 !important; }
.swiper-slide-prev-prev, .swiper-slide-next-next { z-index: 400 !important; }
.swiper-slide-duplicate { z-index: 50 !important; }

.card { /* کارتِ داخل اسلاید: جلوگیری از مشکل backface هنگام transform */ backface-visibility: hidden; }

/* Hide default Swiper navigation arrows on desktop/tablet; show only on mobile */
/* دکمه‌های ناوبری: در دسکتاپ مخفی می‌شوند (معیار: UX موبایل) */
.swiper-button-next, .swiper-button-prev {
  opacity: 0 !important;
  pointer-events: none !important;
}

@media (max-width: 640px) {
  .swiper-button-next, .swiper-button-prev { opacity: 1 !important; pointer-events: auto !important; }
}

/* ظرف داخلی هر اسلاید برای مرکزچینی کارت */
.slide {
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Default slide sizing — allow Swiper breakpoints to control how many slides are visible */
.swiper-slide { /* اجازه می‌دهیم Swiper خودش اندازه نمایش را تعیین کند */ width: auto; }

.card {
  /* ابعاد و ظاهر کارت: نمایانگر نسبت تصویر 9:16 (عرض : ارتفاع = 9:16) */
  display: block;
  width: 100%;
  /* این خط مشخص می‌کند کارت همیشه نسبت افقی 16:9 داشته باشد (landscape) */
  aspect-ratio: 16 / 9; /* معیار: نسبت ثابت کارت (عرض : ارتفاع = 16:9) */
  border-radius: 12px;
  overflow: hidden;
  position: relative;
  /* محدود کردن عرض کارت تا در لپتاپ خیلی بزرگ نشود */
  /* برای دسکتاپ عرض کارت توسط CSS در @media مدیریت می‌شود (fixed 632px) */
  max-width: none;
  margin: 0; 
  /* سایه سبک‌تر و حرفه‌ای */
  box-shadow: 0 8px 24px var(--shadow-3);
  /* نقطه-origin برای scale/rotate */
  transform-origin: center center;
  /* انیمیشن برای transform و سایه؛ معیار: روان بودن حرکت */
  transition: transform 420ms cubic-bezier(.22,.9,.32,1), box-shadow 320ms ease, opacity 220ms ease;
  /* use centralized foreground/page background tokens */
  background: var(--page-background);
  will-change: transform, opacity;
}

/* Desktop-specific: fix active card height to 355px while keeping others smaller via transforms */
@media (min-width: 900px) {
  /* Desktop layout: center card fixed size, side cards at 75% height */
  .card { width: 632px; /* base width for all cards on desktop */ }

  /* Active (center) card: exact size and lifted */
  .swiper-slide-active .card {
    width: 632px;
    height: 355px; /* دقیقاً 355px */
    aspect-ratio: auto; /* disable aspect-ratio for exact sizing */
    transform: translateY(-12px);
    z-index: 2000;
  }

  /* Ensure image fills the fixed-size card */
  .swiper-slide-active .card .imageWrap { height: 100%; width: 100%; }

  /* Side cards: slightly smaller and lower to create depth */
  .swiper-slide-next .card,
  .swiper-slide-prev .card {
    width: 632px;
    height: 220px; /* smaller than center */
    transform: translateY(18px) scale(0.75);
    z-index: 800;
    opacity: 0.98;
  }

  /* Further slides slightly smaller */
  .swiper-slide-prev-prev .card,
  .swiper-slide-next-next .card {
    width: 632px;
    height: 240px;
    transform: translateY(18px);
    z-index: 400;
    opacity: 0.9;
  }
}

/* single-card variant styling */
.singleCard { /* استایل حالت تک بنر: حداکثر عرض کارت وقتی فقط یک بنر داریم */ max-width: 1100px; margin: 0 auto; }

.imageWrap {
  /* ظرف تصویر داخل کارت: تصویر کل کارت را پر می‌کند */
  position: relative;
  width: 100%;
  height: 100%;
}

/* Meta overlay */
.meta {
  /* لایه متن/کپشن کارت: در پایین کارت قرار می‌گیرد */
  position: absolute;
  left: 0;
  bottom: 0;
  width: 100%;
  padding: 1rem 1.25rem;
  color: white;
}

/* center title/caption variant: put text centered with no overlay background */
.metaCenter {
  /* متای مرکز: متن را وسط کارت قرار می‌دهد */
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
  bottom: auto; /* جلوگیری از تاثیر .meta */
  width: 100%;
  padding: 0 1.25rem;
  background: transparent;
}

.title {
  /* استایل عنوان: اندازه فونت معیار ظاهری متن روی بنر */
  margin: 0;
  font-size: 2.0rem; /* معیار: خوانایی عنوان */
  font-weight: 900;
}

.caption {
  /* استایل کپشن: کوچک‌تر از عنوان */
  margin: 0.25rem 0 0;
  font-size: 1rem;
  opacity: 0.9;
}

/* Emphasize center slide */
/* Emphasize center slide (moderate scale to avoid layout clipping) */
.swiper-slide-active .card {
  /*
    کارت وسطی (Center):
    - wysokość کارت را با scaleY افزایش می‌دهیم تا نسبت به کناری‌ها بلندتر به نظر برسد.
    - عرض را کمی افزایش می‌کنیم (scaleX ~ 1.03) تا پهنای کارت حفظ شود.
    - translateY منفی کارت وسط را به جلو (بالاتر) می‌آورد.
    خطوط مهم: transform (scaleX / scaleY / translateY) و z-index برای جلو بودن کارت.
  */
  /* اندازهٔ مرکز را به حالت کوچک‌تر و ظریف بازمی‌گردانیم (پیش‌فرض زیبا و آرام) */
  transform: scale(1.08) translateY(-8px);
  box-shadow: 0 6px 18px var(--shadow-2);
  opacity: 1;
  /* z-index بالا برای اینکه کارت وسط روی بقیه قرار بگیرد */
  z-index: 300;
}

/* Slightly smaller side slides */
/* Slightly smaller side slides */
.swiper-slide-next .card,
.swiper-slide-prev .card {
  /*
    کارت‌های کناری (Side):
    - ارتفاع را بسیار کاهش می‌دهیم (scaleY ~ 0.65) تا کارت وسط از نظر ارتفاع برجسته شود.
    - عرض را تقریباً حفظ می‌کنیم (scaleX ~ 0.98) تا نمای نوار مسطح نشود.
    - translateY مثبت کارت‌های کنار را کمی پایین می‌آورد تا عمق ایجاد شود.
    نکته: میزان اورلپ بین کارت‌ها توسط مقدار spaceBetween در BannerSlider.tsx کنترل می‌شود (مقدار منفی -> اورلپ بیشتر).
  */
  /* کارت‌های کنار: کوچکتر برای تاکید بیشتر روی مرکز */
  transform: scale(0.75) translateY(34px);
  z-index: 200;
  opacity: 0.9;
}

/* further reduce non-adjacent slides */
/* Non-adjacent slides reduced slightly */
.swiper-slide-prev-prev .card,
.swiper-slide-next-next .card {
  /* اسلایدهای دورتر: کمی کوچک‌تر برای عمق اما نزدیک به اندازهٔ پایه */
  transform: scaleX(0.85) scaleY(0.8) translateY(8px);
  opacity: 0.92;
}

/* Keep slides visible and interactive */
.swiper-slide { /* مشخصهٔ نمایش و تعامل اسلاید */ opacity: 1; pointer-events: auto; position: relative; }

/* Keep duplicated slides visible when looping; avoid transforms that push them outside render bounds */
.swiper-slide, .swiper-slide .card { /* حفظ سه‌بعدی و جلوگیری از ناپدید شدن هنگام transform */ -webkit-transform-style: preserve-3d; transform-style: preserve-3d; backface-visibility: hidden; }

/* Ensure slide taps and clicks are honored on touch devices when autoplay is stopped */
.swiper-slide .card { /* لمس روی کارت: جلوگیری از رفتار پیش‌فرض برای لمس */ touch-action: manipulation; }

/* Responsive adjustments */
/* واکنش‌گرایی: تبلت */
@media (max-width: 900px) {
  /* در حالت تبلت: دیگر ارتفاع دستی نداریم چون از aspect-ratio استفاده می‌کنیم */
  /* اندازه از aspect-ratio محاسبه می‌شود */
  .swiper-slide-active .card { transform: scale(1.12) translateY(-8px); }
  .swiper-slide-next .card, .swiper-slide-prev .card { transform: scale(0.9) translateY(8px); }
}

/* واکنش‌گرایی: موبایل */
@media (max-width: 640px) {
  /* موبایل: از aspect-ratio استفاده می‌کنیم؛ فقط شعاع گوشه را کمتر می‌کنیم */
  .card { border-radius: 8px; }
  .swiper-slide-active .card { transform: scale(1.06) translateY(-8px); }
  .swiper-slide-next .card, .swiper-slide-prev .card { transform: scale(0.84) translateY(10px); }
}



.singleCard {
  width: 100%;
  max-width: 1100px;
  margin: 0 auto;
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 0 12px;
}

.wrapper.singleBanner {
  box-shadow: none !important;
  background: none !important;
  margin-top: 0;
  padding: 0;
  overflow: hidden;
}

.singleCard .card {
  width: 100%;
  border-radius: 16px;
  overflow: hidden;
  position: relative;
  box-shadow: 0 6px 18px var(--shadow-2);
  background: none !important;
  transform: none !important;
  opacity: 1 !important;
  z-index: 1 !important;
}

.singleCard .imageWrap {
  position: relative;
  inset: 0;
  width: 100%;
  height: 100%;
  border-radius: inherit;
  overflow: hidden;
}

.singleCard .imageWrap img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center;
  display: block;
}

@media (min-width: 1200px) {
  .singleCard .card {
    max-width: 960px;
    height: 360px;
  }
}

@media (max-width: 1199px) and (min-width: 900px) {
  .singleCard .card {
    max-width: 820px;
    height: 320px;
  }
}

@media (max-width: 899px) {
  .singleCard {
    padding: 0 12px;
  }

  .singleCard .card {
    border-radius: 14px;
    height: auto;
    aspect-ratio: 16 / 9;
  }
}

@media (max-width: 640px) {
  .singleCard {
    padding: 0 10px;
  }

  .singleCard .card {
    border-radius: 12px;
    box-shadow: 0 4px 12px var(--shadow-2);
  }

  .singleCard .title {
    font-size: 1.5rem;
  }

  .singleCard .caption {
    font-size: 0.95rem;
  }
}

